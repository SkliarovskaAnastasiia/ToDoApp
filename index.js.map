{"version":3,"file":"index.js","sources":["../src/js/localstorage.js","../src/js/dark-theme.js","../src/js/refs.js","../src/js/count-tasks.js","../src/js/reorder-list.js","../src/js/render-tasks.js","../src/main.js"],"sourcesContent":["export function addDataToLocalstorage(key, value) {\n  try {\n    const normolaizedValue = JSON.stringify(value);\n    localStorage.setItem(key, normolaizedValue);\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nexport function getDataFromLocalStorage(key) {\n  try {\n    const value = localStorage.getItem(key);\n    return value === null ? undefined : JSON.parse(value);\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nexport function removeDataFromLocalStorage(key) {\n  try {\n    localStorage.removeItem(key);\n  } catch (error) {\n    console.log(error);\n  }\n}\n","import {\n  addDataToLocalstorage,\n  removeDataFromLocalStorage,\n  getDataFromLocalStorage,\n} from './localstorage';\n\nconst enableDarkmode = () => {\n  document.body.classList.add('dark-theme');\n  addDataToLocalstorage('darkmode', 'active');\n};\n\nconst disableDarkmode = () => {\n  document.body.classList.remove('dark-theme');\n  removeDataFromLocalStorage('darkmode');\n};\n\nlet darkTheme = getDataFromLocalStorage('darkmode');\nif (darkTheme === 'active') enableDarkmode();\n\ndocument.querySelector('.js-theme-btn').addEventListener('click', () => {\n  darkTheme = getDataFromLocalStorage('darkmode');\n  darkTheme !== 'active' ? enableDarkmode() : disableDarkmode();\n});\n","export const refs = {\n  formEl: document.querySelector('.js-form'),\n  tasksListEl: document.querySelector('.js-list'),\n  textContentOfEmptyList: document.querySelector('.js-empty-item'),\n  clearTasksBtn: document.querySelector('.js-clear-taskts-btn'),\n  tasksQuantity: document.querySelector('.js-quantity'),\n  filters: document.querySelectorAll('.js-filter-btn'),\n};\n","import { refs } from './refs';\n\nexport function countActiveTasks(tasksArr) {\n  const incompletedTasks = tasksArr.filter(task => !task.completed).length;\n  const taskStr = incompletedTasks === 1 ? 'task' : 'tasks';\n\n  refs.tasksQuantity.textContent = `${incompletedTasks} ${taskStr} left`;\n}\n","import { refs } from './refs';\n\nexport function addDraggingClass() {\n  refs.tasksListEl.addEventListener('dragstart', event => {\n    if (event.target.tagName === 'LI')\n      setTimeout(() => event.target.classList.add('dragging'), 0);\n  });\n\n  refs.tasksListEl.addEventListener('dragend', event => {\n    if (event.target.tagName === 'LI')\n      event.target.classList.remove('dragging');\n  });\n}\n\nexport function dragoverListEl(event) {\n  event.preventDefault();\n\n  const draggingItem = refs.tasksListEl.querySelector('.dragging');\n\n  const siblings = [\n    ...refs.tasksListEl.querySelectorAll('.js-list-item:not(.dragging)'),\n  ];\n\n  let nextSibling = siblings.find(\n    sibling =>\n      event.clientY <=\n      sibling.getBoundingClientRect().top + sibling.offsetHeight / 2\n  );\n\n  refs.tasksListEl.insertBefore(draggingItem, nextSibling);\n}\n","import { refs } from './refs';\nimport { addDataToLocalstorage } from './localstorage';\nimport { delateTask, tasksArr, currentFilter } from '../main';\nimport { countActiveTasks } from './count-tasks';\nimport { addDraggingClass, dragoverListEl } from './reorder-list';\n\nfunction createTaskItem(task, taskIndex) {\n  const taskLi = document.createElement('li');\n  taskLi.className = 'list-item js-list-item';\n  taskLi.id = `task-${task.id}`;\n  taskLi.draggable = 'true';\n  taskLi.innerHTML = `\n  <input class=\"checkbox js-checkbox visually-hidden\" type=\"checkbox\" id=\"${taskIndex}\"/>\n  <label class=\"checkbox-label\" for=\"${taskIndex}\">\n     <span class=\"custom-checkbox\">\n        <svg class=\"custom-checkbox-icon\" width=\"10px\" height=\"10px\">\n          <use href=\".//img/icons/symbol-defs.svg#icon-icon-check\"></use>\n        </svg>\n     </span>\n     <p class=\"task-text\">${task.text}</p>\n  </label>\n  <button class=\"delate-btn\" id=\"btn-${task.id}\">\n     <svg class=\"btn-icon\">\n         <use href=\"./img/icons/symbol-defs.svg#icon-icon-cross\"></use>\n     </svg>\n  </button>\n  `;\n\n  return taskLi;\n}\n\nfunction renderTask(tasks) {\n  refs.tasksListEl.innerHTML = '';\n\n  if (!tasks.length) {\n    refs.textContentOfEmptyList.classList.remove('is-hidden');\n    refs.clearTasksBtn.disabled = true;\n  } else {\n    refs.textContentOfEmptyList.classList.add('is-hidden');\n    refs.clearTasksBtn.disabled = false;\n  }\n\n  tasks.forEach((task, idx, tasks) => {\n    const taskItem = createTaskItem(task, idx);\n\n    refs.tasksListEl.append(taskItem);\n\n    const checkbox = taskItem.querySelector('.js-checkbox');\n\n    checkbox.addEventListener('change', event => {\n      tasks[idx].completed = event.currentTarget.checked;\n      addDataToLocalstorage('tasks', tasks);\n      renderFilteredTasks(currentFilter);\n      countActiveTasks(tasks);\n    });\n\n    checkbox.checked = task.completed;\n\n    taskItem.querySelector(`#btn-${task.id}`).addEventListener('click', () => {\n      delateTask(task.id);\n    });\n  });\n\n  countActiveTasks(tasks);\n}\n\nexport function renderFilteredTasks(filter) {\n  let filteredTasks = [];\n\n  switch (filter) {\n    case 'active': {\n      filteredTasks = tasksArr.filter(task => !task.completed);\n      break;\n    }\n    case 'completed': {\n      filteredTasks = tasksArr.filter(task => task.completed);\n      break;\n    }\n    default: {\n      filteredTasks = [...tasksArr];\n    }\n  }\n\n  renderTask(filteredTasks);\n  addDraggingClass();\n  refs.tasksListEl.addEventListener('dragover', dragoverListEl);\n  refs.tasksListEl.addEventListener('dragenter', event =>\n    event.preventDefault()\n  );\n}\n","import './js/dark-theme.js';\nimport { refs } from './js/refs.js';\nimport { renderFilteredTasks } from './js/render-tasks.js';\nimport {\n  addDataToLocalstorage,\n  getDataFromLocalStorage,\n} from './js/localstorage.js';\nimport { countActiveTasks } from './js/count-tasks.js';\nimport './js/reorder-list.js';\n\nexport let tasksArr = getDataFromLocalStorage('tasks') || [];\nexport let currentFilter = 'all';\n\nif (tasksArr.length) {\n  refs.textContentOfEmptyList.classList.add('is-hidden');\n  renderFilteredTasks(currentFilter);\n\n  refs.clearTasksBtn.addEventListener('click', onClearBtn);\n}\n\nfunction onFormSubmit(event) {\n  event.preventDefault();\n\n  const inputValue = refs.formEl.elements.task.value.trim();\n\n  if (inputValue === '') return;\n\n  const taskObj = {\n    id: Date.now(),\n    text: inputValue,\n    completed: false,\n  };\n\n  tasksArr.push(taskObj);\n\n  renderFilteredTasks(currentFilter);\n  refs.textContentOfEmptyList.classList.add('is-hidden');\n\n  addDataToLocalstorage('tasks', tasksArr);\n\n  refs.clearTasksBtn.addEventListener('click', onClearBtn);\n\n  event.currentTarget.reset();\n}\n\nrefs.formEl.addEventListener('submit', onFormSubmit);\n\nfunction onClearBtn() {\n  if (currentFilter === 'all') {\n    tasksArr = [];\n  } else if (currentFilter === 'active') {\n    tasksArr = tasksArr.filter(task => task.completed);\n  } else if (currentFilter === 'completed') {\n    tasksArr = tasksArr.filter(task => !task.completed);\n  }\n\n  addDataToLocalstorage('tasks', tasksArr);\n  renderFilteredTasks(currentFilter);\n  countActiveTasks(tasksArr);\n\n  if (!tasksArr.length) {\n    refs.textContentOfEmptyList.classList.toggle('is-hidden');\n\n    refs.clearTasksBtn.disabled = true;\n  }\n}\n\nexport function delateTask(taskId) {\n  tasksArr = tasksArr.filter(task => task.id !== taskId);\n\n  addDataToLocalstorage('tasks', tasksArr);\n  renderFilteredTasks(currentFilter);\n  countActiveTasks(tasksArr);\n\n  if (!refs.tasksListEl.children.length) {\n    refs.textContentOfEmptyList.classList.remove('is-hidden');\n  }\n}\n\nrefs.filters.forEach(btn => {\n  btn.addEventListener('click', event => {\n    document.querySelector('.js-filter-btn.active').classList.remove('active');\n    event.target.classList.add('active');\n\n    currentFilter = event.target.id;\n    renderFilteredTasks(currentFilter);\n  });\n});\n"],"names":["addDataToLocalstorage","key","value","normolaizedValue","error","getDataFromLocalStorage","removeDataFromLocalStorage","enableDarkmode","disableDarkmode","darkTheme","refs","countActiveTasks","tasksArr","incompletedTasks","task","taskStr","addDraggingClass","event","dragoverListEl","draggingItem","nextSibling","sibling","createTaskItem","taskIndex","taskLi","renderTask","tasks","idx","taskItem","checkbox","renderFilteredTasks","currentFilter","delateTask","filter","filteredTasks","onClearBtn","onFormSubmit","inputValue","taskObj","taskId","btn"],"mappings":"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"}