{"version":3,"file":"index.js","sources":["../src/js/localstorage.js","../src/js/dark-theme.js","../src/js/refs.js","../src/js/count-tasks.js","../src/js/reorder-list.js","../src/js/render-tasks.js","../src/main.js"],"sourcesContent":["export function addDataToLocalstorage(key, value) {\n  try {\n    const normolaizedValue = JSON.stringify(value);\n    localStorage.setItem(key, normolaizedValue);\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nexport function getDataFromLocalStorage(key) {\n  try {\n    const value = localStorage.getItem(key);\n    return value === null ? undefined : JSON.parse(value);\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nexport function removeDataFromLocalStorage(key) {\n  try {\n    localStorage.removeItem(key);\n  } catch (error) {\n    console.log(error);\n  }\n}\n","import {\n  addDataToLocalstorage,\n  removeDataFromLocalStorage,\n  getDataFromLocalStorage,\n} from './localstorage';\n\nconst enableDarkmode = () => {\n  document.body.classList.add('dark-theme');\n  addDataToLocalstorage('darkmode', 'active');\n};\n\nconst disableDarkmode = () => {\n  document.body.classList.remove('dark-theme');\n  removeDataFromLocalStorage('darkmode');\n};\n\nlet darkTheme = getDataFromLocalStorage('darkmode');\nif (darkTheme === 'active') enableDarkmode();\n\ndocument.querySelector('.js-theme-btn').addEventListener('click', () => {\n  darkTheme = getDataFromLocalStorage('darkmode');\n  darkTheme !== 'active' ? enableDarkmode() : disableDarkmode();\n});\n","export const refs = {\n  formEl: document.querySelector('.js-form'),\n  tasksListEl: document.querySelector('.js-list'),\n  textContentOfEmptyList: document.querySelector('.js-empty-item'),\n  clearTasksBtn: document.querySelector('.js-clear-taskts-btn'),\n  tasksQuantity: document.querySelector('.js-quantity'),\n  filters: document.querySelectorAll('.js-filter-btn'),\n};\n","import { refs } from './refs';\n\nexport function countActiveTasks(tasksArr) {\n  const incompletedTasks = tasksArr.filter(task => !task.completed).length;\n  const taskStr = incompletedTasks === 1 ? 'task' : 'tasks';\n\n  refs.tasksQuantity.textContent = `${incompletedTasks} ${taskStr} left`;\n}\n","import { refs } from './refs';\nimport { updateTaskList } from '../main';\n\nfunction addClass(event) {\n  const liEl = event.target.closest('.js-list-item');\n  if (liEl) setTimeout(() => liEl.classList.add('dragging'), 0);\n  document.body.classList.add('no-scroll');\n}\n\nfunction removeClass(event) {\n  const liEl = event.target.closest('.js-list-item');\n  if (liEl) liEl.classList.remove('dragging');\n  document.body.classList.remove('no-scroll');\n}\n\nexport function addDraggingClass() {\n  refs.tasksListEl.addEventListener('dragstart', addClass);\n\n  refs.tasksListEl.addEventListener('dragend', removeClass);\n\n  refs.tasksListEl.addEventListener('touchstart', addClass);\n\n  refs.tasksListEl.addEventListener('touchend', removeClass);\n}\n\nfunction reorderListEl(event, isTouch) {\n  const draggingItem = refs.tasksListEl.querySelector('.dragging');\n\n  const siblings = [\n    ...refs.tasksListEl.querySelectorAll('.js-list-item:not(.dragging)'),\n  ];\n\n  const clientY = isTouch ? event.touches[0].clientY : event.clientY;\n\n  let nextSibling = siblings.find(\n    sibling =>\n      clientY <= sibling.getBoundingClientRect().top + sibling.offsetHeight / 2\n  );\n\n  refs.tasksListEl.insertBefore(draggingItem, nextSibling);\n  updateTaskList();\n}\n\nexport function dragoverListEl(event) {\n  event.preventDefault();\n  reorderListEl(event, false);\n}\n\nexport function touchmoveListEl(event) {\n  reorderListEl(event, true);\n}\n","import { refs } from './refs';\nimport { addDataToLocalstorage } from './localstorage';\nimport { delateTask, tasksArr, currentFilter } from '../main';\nimport { countActiveTasks } from './count-tasks';\nimport {\n  addDraggingClass,\n  dragoverListEl,\n  touchmoveListEl,\n} from './reorder-list';\n\nfunction createTaskItem(task, taskIndex) {\n  const taskLi = document.createElement('li');\n  taskLi.className = 'list-item js-list-item';\n  taskLi.id = `task-${task.id}`;\n  taskLi.draggable = 'true';\n  taskLi.innerHTML = `\n  <input class=\"checkbox js-checkbox visually-hidden\" type=\"checkbox\" id=\"${taskIndex}\"/>\n  <label class=\"checkbox-label\" for=\"${taskIndex}\">\n     <span class=\"custom-checkbox\">\n        <svg class=\"custom-checkbox-icon\" width=\"10px\" height=\"10px\">\n          <use href=\"/ToDoApp/assets/symbol-defs-BP4IDnnM.svg#icon-icon-check\"></use>\n        </svg>\n     </span>\n     <p class=\"task-text\">${task.text}</p>\n  </label>\n  <button class=\"delate-btn\" id=\"btn-${task.id}\">\n     <svg class=\"btn-icon\">\n         <use href=\"/ToDoApp/assets/symbol-defs-BP4IDnnM.svg#icon-icon-cross\"></use>\n     </svg>\n  </button>\n  `;\n\n  return taskLi;\n}\n\nfunction renderTask(tasks) {\n  refs.tasksListEl.innerHTML = '';\n\n  if (!tasks.length) {\n    refs.textContentOfEmptyList.classList.remove('is-hidden');\n    refs.clearTasksBtn.disabled = true;\n  } else {\n    refs.textContentOfEmptyList.classList.add('is-hidden');\n    refs.clearTasksBtn.disabled = false;\n  }\n\n  tasks.forEach((task, idx, tasks) => {\n    const taskItem = createTaskItem(task, idx);\n\n    refs.tasksListEl.append(taskItem);\n\n    const checkbox = taskItem.querySelector('.js-checkbox');\n\n    checkbox.addEventListener('change', event => {\n      tasks[idx].completed = event.currentTarget.checked;\n      addDataToLocalstorage('tasks', tasks);\n      renderFilteredTasks(currentFilter);\n    });\n\n    checkbox.checked = task.completed;\n\n    taskItem.querySelector(`#btn-${task.id}`).addEventListener('click', () => {\n      delateTask(task.id);\n    });\n  });\n}\n\nexport function renderFilteredTasks(filter) {\n  let filteredTasks = [];\n\n  switch (filter) {\n    case 'active': {\n      filteredTasks = tasksArr.filter(task => !task.completed);\n      break;\n    }\n    case 'completed': {\n      filteredTasks = tasksArr.filter(task => task.completed);\n      break;\n    }\n    default: {\n      filteredTasks = [...tasksArr];\n    }\n  }\n\n  renderTask(filteredTasks);\n  countActiveTasks(filteredTasks);\n  addDraggingClass();\n  refs.tasksListEl.addEventListener('dragover', dragoverListEl);\n  refs.tasksListEl.addEventListener('dragenter', event =>\n    event.preventDefault()\n  );\n  refs.tasksListEl.addEventListener('touchmove', touchmoveListEl);\n}\n","import './js/dark-theme.js';\nimport { refs } from './js/refs.js';\nimport { renderFilteredTasks } from './js/render-tasks.js';\nimport {\n  addDataToLocalstorage,\n  getDataFromLocalStorage,\n} from './js/localstorage.js';\n\nexport let tasksArr = getDataFromLocalStorage('tasks') || [];\nexport let currentFilter = 'all';\n\nif (tasksArr.length) {\n  refs.textContentOfEmptyList.classList.add('is-hidden');\n  renderFilteredTasks(currentFilter);\n\n  refs.clearTasksBtn.addEventListener('click', onClearBtn);\n}\n\nfunction onFormSubmit(event) {\n  event.preventDefault();\n\n  const inputValue = refs.formEl.elements.task.value.trim();\n\n  if (inputValue === '') return;\n\n  const taskObj = {\n    id: Date.now(),\n    text: inputValue,\n    completed: false,\n  };\n\n  tasksArr.push(taskObj);\n\n  renderFilteredTasks(currentFilter);\n  refs.textContentOfEmptyList.classList.add('is-hidden');\n\n  addDataToLocalstorage('tasks', tasksArr);\n\n  refs.clearTasksBtn.addEventListener('click', onClearBtn);\n\n  event.currentTarget.reset();\n}\n\nrefs.formEl.addEventListener('submit', onFormSubmit);\n\nfunction onClearBtn() {\n  if (currentFilter === 'all') {\n    tasksArr = [];\n  } else if (currentFilter === 'active') {\n    tasksArr = tasksArr.filter(task => task.completed);\n  } else if (currentFilter === 'completed') {\n    tasksArr = tasksArr.filter(task => !task.completed);\n  }\n\n  addDataToLocalstorage('tasks', tasksArr);\n  renderFilteredTasks(currentFilter);\n\n  if (!tasksArr.length) {\n    refs.textContentOfEmptyList.classList.toggle('is-hidden');\n\n    refs.clearTasksBtn.disabled = true;\n  }\n}\n\nexport function delateTask(taskId) {\n  tasksArr = tasksArr.filter(task => task.id !== taskId);\n\n  addDataToLocalstorage('tasks', tasksArr);\n  renderFilteredTasks(currentFilter);\n\n  if (!refs.tasksListEl.children.length) {\n    refs.textContentOfEmptyList.classList.remove('is-hidden');\n  }\n}\n\nrefs.filters.forEach(btn => {\n  btn.addEventListener('click', event => {\n    document.querySelector('.js-filter-btn.active').classList.remove('active');\n    event.target.classList.add('active');\n\n    currentFilter = event.target.id;\n    renderFilteredTasks(currentFilter);\n  });\n});\n\nexport function updateTaskList() {\n  tasksArr = [...refs.tasksListEl.querySelectorAll('.js-list-item')].map(\n    item => {\n      return {\n        id: item.id,\n        text: item.querySelector('.task-text').textContent,\n        completed: item.querySelector('.js-checkbox').checked,\n      };\n    }\n  );\n\n  console.log(tasksArr);\n\n  addDataToLocalstorage('tasks', tasksArr);\n}\n"],"names":["addDataToLocalstorage","key","value","normolaizedValue","error","getDataFromLocalStorage","removeDataFromLocalStorage","enableDarkmode","disableDarkmode","darkTheme","refs","countActiveTasks","tasksArr","incompletedTasks","task","taskStr","addClass","event","liEl","removeClass","addDraggingClass","reorderListEl","isTouch","draggingItem","siblings","clientY","nextSibling","sibling","updateTaskList","dragoverListEl","touchmoveListEl","createTaskItem","taskIndex","taskLi","renderTask","tasks","idx","taskItem","checkbox","renderFilteredTasks","currentFilter","delateTask","filter","filteredTasks","onClearBtn","onFormSubmit","inputValue","taskObj","taskId","btn","item"],"mappings":"ssBAAO,SAASA,EAAsBC,EAAKC,EAAO,CAChD,GAAI,CACF,MAAMC,EAAmB,KAAK,UAAUD,CAAK,EAC7C,aAAa,QAAQD,EAAKE,CAAgB,CAC3C,OAAQC,EAAO,CACd,QAAQ,IAAIA,CAAK,CAClB,CACH,CAEO,SAASC,EAAwBJ,EAAK,CAC3C,GAAI,CACF,MAAMC,EAAQ,aAAa,QAAQD,CAAG,EACtC,OAAOC,IAAU,KAAO,OAAY,KAAK,MAAMA,CAAK,CACrD,OAAQE,EAAO,CACd,QAAQ,IAAIA,CAAK,CAClB,CACH,CAEO,SAASE,EAA2BL,EAAK,CAC9C,GAAI,CACF,aAAa,WAAWA,CAAG,CAC5B,OAAQG,EAAO,CACd,QAAQ,IAAIA,CAAK,CAClB,CACH,CClBA,MAAMG,EAAiB,IAAM,CAC3B,SAAS,KAAK,UAAU,IAAI,YAAY,EACxCP,EAAsB,WAAY,QAAQ,CAC5C,EAEMQ,EAAkB,IAAM,CAC5B,SAAS,KAAK,UAAU,OAAO,YAAY,EAC3CF,EAA2B,UAAU,CACvC,EAEA,IAAIG,EAAYJ,EAAwB,UAAU,EAC9CI,IAAc,UAAUF,IAE5B,SAAS,cAAc,eAAe,EAAE,iBAAiB,QAAS,IAAM,CACtEE,EAAYJ,EAAwB,UAAU,EAC9CI,IAAc,SAAWF,EAAgB,EAAGC,EAAe,CAC7D,CAAC,ECtBM,MAAME,EAAO,CAClB,OAAQ,SAAS,cAAc,UAAU,EACzC,YAAa,SAAS,cAAc,UAAU,EAC9C,uBAAwB,SAAS,cAAc,gBAAgB,EAC/D,cAAe,SAAS,cAAc,sBAAsB,EAC5D,cAAe,SAAS,cAAc,cAAc,EACpD,QAAS,SAAS,iBAAiB,gBAAgB,CACrD,ECLO,SAASC,EAAiBC,EAAU,CACzC,MAAMC,EAAmBD,EAAS,OAAOE,GAAQ,CAACA,EAAK,SAAS,EAAE,OAC5DC,EAAUF,IAAqB,EAAI,OAAS,QAElDH,EAAK,cAAc,YAAc,GAAGG,CAAgB,IAAIE,CAAO,OACjE,CCJA,SAASC,EAASC,EAAO,CACvB,MAAMC,EAAOD,EAAM,OAAO,QAAQ,eAAe,EAC7CC,GAAM,WAAW,IAAMA,EAAK,UAAU,IAAI,UAAU,EAAG,CAAC,EAC5D,SAAS,KAAK,UAAU,IAAI,WAAW,CACzC,CAEA,SAASC,EAAYF,EAAO,CAC1B,MAAMC,EAAOD,EAAM,OAAO,QAAQ,eAAe,EAC7CC,GAAMA,EAAK,UAAU,OAAO,UAAU,EAC1C,SAAS,KAAK,UAAU,OAAO,WAAW,CAC5C,CAEO,SAASE,GAAmB,CACjCV,EAAK,YAAY,iBAAiB,YAAaM,CAAQ,EAEvDN,EAAK,YAAY,iBAAiB,UAAWS,CAAW,EAExDT,EAAK,YAAY,iBAAiB,aAAcM,CAAQ,EAExDN,EAAK,YAAY,iBAAiB,WAAYS,CAAW,CAC3D,CAEA,SAASE,EAAcJ,EAAOK,EAAS,CACrC,MAAMC,EAAeb,EAAK,YAAY,cAAc,WAAW,EAEzDc,EAAW,CACf,GAAGd,EAAK,YAAY,iBAAiB,8BAA8B,CACvE,EAEQe,EAAUH,EAAUL,EAAM,QAAQ,CAAC,EAAE,QAAUA,EAAM,QAE3D,IAAIS,EAAcF,EAAS,KACzBG,GACEF,GAAWE,EAAQ,sBAAqB,EAAG,IAAMA,EAAQ,aAAe,CAC9E,EAEEjB,EAAK,YAAY,aAAaa,EAAcG,CAAW,EACvDE,GACF,CAEO,SAASC,EAAeZ,EAAO,CACpCA,EAAM,eAAc,EACpBI,EAAcJ,EAAO,EAAK,CAC5B,CAEO,SAASa,EAAgBb,EAAO,CACrCI,EAAcJ,EAAO,EAAI,CAC3B,CCxCA,SAASc,EAAejB,EAAMkB,EAAW,CACvC,MAAMC,EAAS,SAAS,cAAc,IAAI,EAC1C,OAAAA,EAAO,UAAY,yBACnBA,EAAO,GAAK,QAAQnB,EAAK,EAAE,GAC3BmB,EAAO,UAAY,OACnBA,EAAO,UAAY;AAAA,4EACuDD,CAAS;AAAA,uCAC9CA,CAAS;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4BAMpBlB,EAAK,IAAI;AAAA;AAAA,uCAEEA,EAAK,EAAE;AAAA;AAAA;AAAA;AAAA;AAAA,IAOrCmB,CACT,CAEA,SAASC,EAAWC,EAAO,CACzBzB,EAAK,YAAY,UAAY,GAExByB,EAAM,QAITzB,EAAK,uBAAuB,UAAU,IAAI,WAAW,EACrDA,EAAK,cAAc,SAAW,KAJ9BA,EAAK,uBAAuB,UAAU,OAAO,WAAW,EACxDA,EAAK,cAAc,SAAW,IAMhCyB,EAAM,QAAQ,CAACrB,EAAMsB,EAAKD,IAAU,CAClC,MAAME,EAAWN,EAAejB,EAAMsB,CAAG,EAEzC1B,EAAK,YAAY,OAAO2B,CAAQ,EAEhC,MAAMC,EAAWD,EAAS,cAAc,cAAc,EAEtDC,EAAS,iBAAiB,SAAUrB,GAAS,CAC3CkB,EAAMC,CAAG,EAAE,UAAYnB,EAAM,cAAc,QAC3CjB,EAAsB,QAASmC,CAAK,EACpCI,EAAoBC,CAAa,CACvC,CAAK,EAEDF,EAAS,QAAUxB,EAAK,UAExBuB,EAAS,cAAc,QAAQvB,EAAK,EAAE,EAAE,EAAE,iBAAiB,QAAS,IAAM,CACxE2B,EAAW3B,EAAK,EAAE,CACxB,CAAK,CACL,CAAG,CACH,CAEO,SAASyB,EAAoBG,EAAQ,CAC1C,IAAIC,EAAgB,CAAA,EAEpB,OAAQD,EAAM,CACZ,IAAK,SAAU,CACbC,EAAgB/B,EAAS,OAAOE,GAAQ,CAACA,EAAK,SAAS,EACvD,KACD,CACD,IAAK,YAAa,CAChB6B,EAAgB/B,EAAS,OAAOE,GAAQA,EAAK,SAAS,EACtD,KACD,CACD,QACE6B,EAAgB,CAAC,GAAG/B,CAAQ,CAE/B,CAEDsB,EAAWS,CAAa,EACxBhC,EAAiBgC,CAAa,EAC9BvB,IACAV,EAAK,YAAY,iBAAiB,WAAYmB,CAAc,EAC5DnB,EAAK,YAAY,iBAAiB,YAAaO,GAC7CA,EAAM,eAAgB,CAC1B,EACEP,EAAK,YAAY,iBAAiB,YAAaoB,CAAe,CAChE,CCpFO,IAAIlB,EAAWP,EAAwB,OAAO,GAAK,GAC/CmC,EAAgB,MAEvB5B,EAAS,SACXF,EAAK,uBAAuB,UAAU,IAAI,WAAW,EACrD6B,EAAoBC,CAAa,EAEjC9B,EAAK,cAAc,iBAAiB,QAASkC,CAAU,GAGzD,SAASC,EAAa5B,EAAO,CAC3BA,EAAM,eAAc,EAEpB,MAAM6B,EAAapC,EAAK,OAAO,SAAS,KAAK,MAAM,OAEnD,GAAIoC,IAAe,GAAI,OAEvB,MAAMC,EAAU,CACd,GAAI,KAAK,IAAK,EACd,KAAMD,EACN,UAAW,EACf,EAEElC,EAAS,KAAKmC,CAAO,EAErBR,EAAoBC,CAAa,EACjC9B,EAAK,uBAAuB,UAAU,IAAI,WAAW,EAErDV,EAAsB,QAASY,CAAQ,EAEvCF,EAAK,cAAc,iBAAiB,QAASkC,CAAU,EAEvD3B,EAAM,cAAc,OACtB,CAEAP,EAAK,OAAO,iBAAiB,SAAUmC,CAAY,EAEnD,SAASD,GAAa,CAChBJ,IAAkB,MACpB5B,EAAW,CAAA,EACF4B,IAAkB,SAC3B5B,EAAWA,EAAS,OAAOE,GAAQA,EAAK,SAAS,EACxC0B,IAAkB,cAC3B5B,EAAWA,EAAS,OAAOE,GAAQ,CAACA,EAAK,SAAS,GAGpDd,EAAsB,QAASY,CAAQ,EACvC2B,EAAoBC,CAAa,EAE5B5B,EAAS,SACZF,EAAK,uBAAuB,UAAU,OAAO,WAAW,EAExDA,EAAK,cAAc,SAAW,GAElC,CAEO,SAAS+B,EAAWO,EAAQ,CACjCpC,EAAWA,EAAS,OAAOE,GAAQA,EAAK,KAAOkC,CAAM,EAErDhD,EAAsB,QAASY,CAAQ,EACvC2B,EAAoBC,CAAa,EAE5B9B,EAAK,YAAY,SAAS,QAC7BA,EAAK,uBAAuB,UAAU,OAAO,WAAW,CAE5D,CAEAA,EAAK,QAAQ,QAAQuC,GAAO,CAC1BA,EAAI,iBAAiB,QAAShC,GAAS,CACrC,SAAS,cAAc,uBAAuB,EAAE,UAAU,OAAO,QAAQ,EACzEA,EAAM,OAAO,UAAU,IAAI,QAAQ,EAEnCuB,EAAgBvB,EAAM,OAAO,GAC7BsB,EAAoBC,CAAa,CACrC,CAAG,CACH,CAAC,EAEM,SAASZ,GAAiB,CAC/BhB,EAAW,CAAC,GAAGF,EAAK,YAAY,iBAAiB,eAAe,CAAC,EAAE,IACjEwC,IACS,CACL,GAAIA,EAAK,GACT,KAAMA,EAAK,cAAc,YAAY,EAAE,YACvC,UAAWA,EAAK,cAAc,cAAc,EAAE,OACtD,EAEA,EAEE,QAAQ,IAAItC,CAAQ,EAEpBZ,EAAsB,QAASY,CAAQ,CACzC"}